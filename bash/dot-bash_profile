#!/usr/bin/env bash

# System Variables
stty -ixon # Forward bash search
shopt -s direxpand

# export PS1='[\W]\$ '
function _update_ps1() {
    local modules="cwd,git,exit"
    PS1="$(command powerline-go -condensed -cwd-max-depth 1 -modules ${modules} -mode compatible -error $?)"
}
PROMPT_COMMAND="_update_ps1; $PROMPT_COMMAND"

export HISTCONTROL=ignoredups
export HISTTIMEFORMAT='%d/%m/%y %T '

export EDITOR=emacs
export VIEWER=emacs

export PYTHONSTARTUP=$HOME/.pythonrc.py
export PIP_CONFIG_FILE=$HOME/.pip.conf
eval "$(pyenv init -)"

PATH="/usr/local/sbin:$HOME/.gem/ruby/2.6.0/bin:$PATH"
export PATH

# Source necessary files
[[ -r "$HOME/.aliases" ]] && . "$HOME/.aliases"

# Java settings
export JAVA_HOME=$(/usr/libexec/java_home -v 13.0.2)

# Bash
BREW_COMPLETE=/usr/local/etc/bash_completion.d
[[ -r "$BREW_COMPLETE/git-completion.bash" ]] && . $BREW_COMPLETE/git-completion.bash
[[ -r "$BREW_COMPLETE/git-prompt.bash" ]] && . $BREW_COMPLETE/git-prompt.sh
[[ -r "$BREW_COMPLETE/brew" ]] && . $BREW_COMPLETE/brew
[[ -r "$BREW_COMPLETE/brew-services" ]] && . $BREW_COMPLETE/brew-services
[[ -r "$BREW_COMPLETE/aws_bash_completer" ]] && . $BREW_COMPLETE/aws_bash_completer
[[ -r "/usr/local/etc/profile.d/bash_completion.sh" ]] && . "/usr/local/etc/profile.d/bash_completion.sh"

# Homebrew
export HOMEBREW_AUTO_UPDATE_SECS=3600
export HOMEBREW_NO_ANALYTICS=1
export SPARK_SHELL=/usr/local/opt/apache-spark/libexec/

# Golang
export GOENV=$HOME/.config/go/env
export PATH=$PATH:$(go env GOPATH)/bin
complete -C /Users/Brad/go/bin/gocomplete go
